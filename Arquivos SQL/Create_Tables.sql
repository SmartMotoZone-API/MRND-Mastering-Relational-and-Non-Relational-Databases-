CREATE TABLE tb_cliente (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nome VARCHAR2(80) NOT NULL,
  email VARCHAR2(120) NOT NULL
);

CREATE TABLE tb_moto (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  cliente_id NUMBER NOT NULL REFERENCES tb_cliente(id),
  placa VARCHAR2(10) NOT NULL UNIQUE,
  modelo VARCHAR2(60) NOT NULL,
  cor VARCHAR2(20) NOT NULL
);

CREATE TABLE tb_ordem_servico (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  moto_id NUMBER NOT NULL REFERENCES tb_moto(id),
  data_abertura DATE NOT NULL,
  descricao VARCHAR2(200) NOT NULL,
  valor NUMBER(12,2) NOT NULL
);

CREATE TABLE fact_saldos (
  agencia NUMBER NOT NULL,
  conta NUMBER NOT NULL,
  saldo NUMBER(12,2) NOT NULL
);

CREATE TABLE auditoria_operacoes (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  tabela VARCHAR2(128) NOT NULL,
  usuario_bd VARCHAR2(128) NOT NULL,
  operacao VARCHAR2(10) NOT NULL,
  data_hora TIMESTAMP NOT NULL,
  valores_old CLOB,
  valores_new CLOB
);
